
# Лабораторная работа №2 - Разработка базового расписания

## 1) Прототипы экранных форм (не менее 7)
Прототипы экранных форм доступны [тут](https://www.figma.com/design/J5eLSGj7Pb5RLGBOrYliGv/%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D1%84%D0%BE%D1%80%D0%BC%D1%8B)

### 1. Авторизация
- **Описание**: Страница авторизации.
- **Элементы**: 
  - Поля данных (эл. почта, пароль)
  - Чекбокс "запомнить меня"
  - Кнопка "Регистрация"
  - Кнопка "Войти"

### 2. Регистрация
- **Описание**: Страница регистрации.
- **Элементы**: 
  - Поля данных (фамилия, имя, эл. почта, пароль и подтверждения пароля)
  - Кнопка "Вход"
  - Кнопка "Регистрация"

### 3. Главная для клиента
- **Описание**: Главная страница, где клиенту предлагается выбор: просмотреть существующие записи или записаться.
- **Элементы**:
  - Кнопка "Записаться"
  - Кнопка "Мои записи"

### 4. Просмотр записей для клиента
- **Описание**: Страница с записями клиента, где он может просмотреть выполненные или предстоящие записи.
- **Элементы**:
  - Список существующих записей клиента
  - Кнопка "Отменить" для предстоящих записей

### 5. Новая запись для клиента
- **Описание**: Страница со свободными записями к разным работникам.
- **Элементы**:
  - Свободные записи у каждого сотрудника с датой и временем
  - Кнопка "Записаться"

### 6. График работы для сотрудника
- **Описание**: Страница с графиком работы, на которой сотрудник может просмотреть все записи на ближайшие даты, а также время обеда.
- **Элементы**:
  - Даты рабочих дней
  - Свободные и занятые записи, а также обеденное время

### 7. Главная для администратора
- **Описание**: Главная страница, где администратору предлагается выбор: страница продуктов, страница услуг и страница рабочих графиков.
- **Элементы**:
  - Кнопка "Продукты"
  - Кнопка "Услуги"
  - Кнопка "Рабочий график"

### 8. Страница редактирования продуктов
- **Описание**: Страница, на которой администратор может увидеть список продуктов, отредактировать продукты или добавить новый.
- **Элементы**:
  - Интерактивная таблица c продуктами
  - Кнопка "Добавить"
  - 
### 9. Страница редактирования услуг
- **Описание**: Страница, на которой администратор может увидеть список услуг, отредактировать услуги или добавить новую.
- **Элементы**:
  - Интерактивная таблица c услугами
  - Кнопка "Добавить"

### 10. Страница редактирования графика
- **Описание**: Страница, на которой администратор может редактировать рабочий график сотрудников.
- **Элементы**:
  - Список всех сотрудников с датами и возможностью фильтрации
  - Кнопка "Редактировать"

## 2) Диаграмма сущностей (ER)
- Диаграмма сущностей находится в папке с лабораторной работой.

## 3) Разработка API системы (не менее 10 функций)

### 1. Аутентификация
- **Метод HTTP**: POST
- **URL**: /api/v1/auth
- **Описание действий**: Аутентификация
- **Входная информация**:
	```json
	{  
	  "email": "test@test.org",  
	  "password": "password123"  
	}
	```


- **Выходная информация**:
  ```json
	{  
	  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",  
	  "refresh_token": "0tnhl3dvkiexwfyv7ff2",  
	  "firstname": "John",  
	  "lastname": "Doe"  
	}
	```


### 2. Регистрация
- **Метод HTTP**: POST
- **URL**: /api/v1/register
- **Описание действий**: Регистрация
- **Входная информация**:
	```json
	{  
	  "firstname": "John",  
	  "lastname": "Doe",
	  "email": "test@test.org",  
	  "password": "password123"  
	}
	```


- **Выходная информация**:
  ```json
	{  
	  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",  
	  "refresh_token": "0tnhl3dvkiexwfyv7ff2",  
	  "firstname": "John",  
	  "lastname": "Doe"  
	}
	```

### 3. Обновление JWT токена
- **Метод HTTP**: POST
- **URL**: /api/v1/refresh-token
- **Описание действий**: Обновление JWT токена, когда срок действия прошлого токена истёк
- **Входная информация**:
	```json
	{  
	  "refresh_token": "0tnhl3dvkiexwfyv7ff2" 
	}
	```
- **Выходная информация**:
  ```json
	{  
	  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",  
	  "refresh_token": "0tnhl3dvkiexwfyv7ff2",   
	}
	```

### 4. Получение списка доступных записей
- **Метод HTTP**: GET
- **URL**: /api/v1/records/free
- **Описание действий**: Возвращает список доступных записей
- **Входная информация**:
   - JWT токен (string) - JWT токен для авторизации пользователя
- **Выходная информация**:
  ```json
	  [  
		  {  
			  "worker": "John Doe",
			  "worker_uuid": "facb21a2-3e0a-4061-821d-76dc26817839",  
		      "job_title": "барбер",  
			  "times": [1734466765, 1734466765, 1734466765]  
		  },  
	  ...  
	]
  ```

### 5. Создание новой записи
- **Метод HTTP**: POST
- **URL**: /api/v1/records
- **Описание действий**: Изменяет запись, закрепляя её за пользователем
- **Входная информация**:
   - JWT токен (string) - JWT токен для авторизации пользователя
   -   ```json
		  {  
		    "worker_uuid": "facb21a2-3e0a-4061-821d-76dc26817839",  
		    "time": 1734466765  
			}
- **Выходная информация**:
  ```json
	  {  
	    "status: "OK"  
		}
  ```

### 6. Получение графика сотрудника
- **Метод HTTP**: GET
- **URL**: /api/v1/records/worker
- **Описание действий**: Получение графика сотрудника
- **Входная информация**:
   - JWT токен (string) - JWT токен для авторизации пользователя
   - sync (int) - время в формате unixtime для синхронизации графика
- **Выходная информация**:
  ```json
	  [  
		  {  
			    "type": "record",  
			    "client": "free",  
			    "start": 1734466765,  
			    "end": 1734466765  
		  },  
		  {  
			    "type": "dinner",  
			    "client": "free",  
			    "start": 1734466765,  
			    "end": 1734466765  
		  },  
		  ...  
	]
  ```

### 7. Получение списка продуктов
- **Метод HTTP**: GET
- **URL**: /api/v1/products
- **Описание действий**: Возвращает список продуктов
- **Входная информация**:
   - JWT токен (string) - JWT токен для авторизации пользователя
- **Выходная информация**:
  ```json
	  [  
		  {  
			    "name": "shampoo",  
			    "description": "professional shampoo",  
			    "price": 700  
		  },  
		  ...  
	]
  ```

### 8. Получение списка услуг
- **Метод HTTP**: GET
- **URL**: /api/v1/services
- **Описание действий**: Возвращает список услуг.
- **Входная информация**:
   - JWT токен (string) - JWT токен для авторизации пользователя
- **Выходная информация**:
  ```json
	  [  
		  {  
		    "name": "покраска волос",  
		    "description": "покраска волос (краска не входит в стоимость)",  
		    "price": 2000  
		  },  
		  ...  
	]
  ```

### 9. Редактирование продукта
- **Метод HTTP**: PUT
- **URL**: /api/v1/products
- **Описание действий**: Редактирует запись с продуктом в БД
- **Входная информация**:
   - JWT токен (string) - JWT токен для авторизации пользователя
   -   ```json
		  {  
		    "name": "шампунь",  
		    "description": "профессиональный шампунь",
		    "price": 500  
			}
- **Выходная информация**:
  ```json
	  {  
	    "status: "OK"  
		}
  ```

### 10. Получение списка уровней мероприятия
- **Метод HTTP**: PUT
- **URL**: /api/v1/products
- **Описание действий**: Редактирует запись с услугой в БД
- **Входная информация**:
   - JWT токен (string) - JWT токен для авторизации пользователя
   -   ```json
		  {  
		    "name": "покраска волос",  
		    "description": "покраска волос (краска входит в стоимость)",
		    "price": 300  
			}
- **Выходная информация**:
  ```json
	  {  
	    "status: "OK"  
		}
  ```

### Иерархическая структура работ (ИСР)

#### 1. Разработка проектной документации
- 1.1. Разработка ТЗ
   - 1.1.1. Сбор требований
   - 1.1.2. Анализ бизнес-логики
   - 1.1.3. Описание функциональных и нефункциональных требований
- 1.2. Согласование ТЗ
- 1.3. Подготовка прототипов экранных форм
   - 1.3.1. Проектирование интерфейсов
   - 1.3.2. Согласование с заказчиком

#### 2. Разработка программного обеспечения
- 2.1. Проектировка архитектуры
	- 2.1.1. Проектировка ролей и методов
	- 2.1.1. Проектировка микросервисов
	- 2.1.2. Проектировка шин между микросервисами
	- 2.1.3. Проектировка балансировки нагрузки
- 2.2. Проектировка БД
	- 2.2.1. Составление сущностей
	- 2.2.2. Нормализация сущностей и связей
	- 2.2.3. Настройка миграций
- 2.3. Разработка API системы
   - 2.3.1. Разработка API для услуг
   - 2.3.2. Разработка API для продуктов
   - 2.3.3. Разработка API для клиентов
   - 2.3.4. Разработка API для работников
   - 2.3.5. Разработка API для администраторов
   - 2.3.5. Разработка аутентификации и авторизации
- 2.4. Разработка фронтенд части
   - 2.4.1. Клиентский фронтенд
   - 2.4.2. Фронтенд для сотрудников
   - 2.4.3. Фронтенд для администраторов

#### 3. Тестирование
- 3.1. Разработка тестов
   - 3.1.1. Юнит-тесты
   - 3.1.2. Интеграционные тесты
- 3.2. Тестирование API
- 3.3. Приемо-сдаточные испытания
   - 3.3.1. Тестирование пользовательских интерфейсов
   - 3.3.2. Тестирование функциональности
- 3.4. Финальное тестирование

Для оценки времени выполнения проекта, с учетом, что работа выполняется одним человеком, можно воспользоваться методом PERT и строить расчет на основе длительности задач Оценим каждую задачу по времени выполнения, чтобы точнее опеределить время выполнения проекта.

### Оценка времени выполнения проекта по методу PERT

#### 1. Оценка задач

Для каждой задачи укажем:
- **Продолжительность** задачи.
- **Количество человек**: Учитывая, что задачи выполняются одним человеком, задачи будут делиться по времени.
- Для каждой задачи, вычислим **пессимистичный** (P), **оптимистичный** (O) и **средний** (M) расчет времени, где:
   - P — наибольшая продолжительность,
   - O — минимальная продолжительность,
   - M — средняя продолжительность.

#### Пример оценки задачи

Задача 1.1: Проектировка архитектуры
- **Продолжительность**: 2 дня.

Время для одной задачи будет оценено как:
- P = 2 дня,
- O = 2 дня,
- M = 2 дня.

Эти оценки будут повторяться для всех задач.

#### 2. Перерасчет по всем задачам

| НОМЕР ИСР | НАЗВАНИЕ ЗАДАЧИ | ПЕССИМИСТИЧНОЕ ВРЕМЯ (P) | ОПТИМИСТИЧНОЕ ВРЕМЯ (O) | СРЕДНЕЕ ВРЕМЯ (M) | ПЕРИОД (ЧЕЛОВЕК-МЕСЯЦ) |
|-----------|-----------------|--------------------------|-------------------------|-------------------|-----------------------|
| 1.1       | Разработка архитектуры | 5 дней | 3 дня | 4 дня | 0.12 чел.-мес. |
| 1.2       | Проектирование бд | 4 дня | 2 дня | 3 дня | 0.08 чел.-мес. |
| 1.3       | Настройка среды разработки | 2 дня | 2 дня | 2 дня | 0.07 чел.-мес. |
| 1.4       | Реализация микросервисов | 10 дней | 7 дней | 9 дней | 0.26 чел.-мес. |
| 1.5       | Реализация фронтенда клиента | 2 дня | 2 дня | 2 дня | 0.07 чел.-мес. |
| 1.6       | Реализация фронтенда работника | 3 дня | 3 дня | 3 дня | 0.1 чел.-мес. |
| 1.7       | Реализация фронтенда администратора | 3 дня | 3 дня | 3 дня | 0.1 чел.-мес. |
| 1.8       | Настройка контейнеризации проекта | 1 день | 1 день | 1 день | 0.03 чел.-мес. |
| 1.9       | Настройка балансировки нагрузки | 2 дня | 2 дня | 2 дня | 0.07 чел.-мес. |
| 1.10      | Настройка маршрута до сервера | 1 день | 1 день | 1 день | 0.03 чел.-мес. |
| 1.11      | Деплой и пайплайны на тестовом контуре | 2 дня | 2 дня | 2 дня | 0.07 чел.-мес. |

#### 3. Общие трудозатраты

Теперь вычислим **общие трудозатраты проекта** в **человеко-месяцах**:
- Сложим все продолжительности всех задач:
  0.12 + 0.08 + 0.07 + 0.26 + 0.07 + 0.1 + 0.1 + 0.03 + 0.07 + 0.03 + 0.07 = 1 чел. -мес.


#### 4. Итоговая оценка

Общие трудозатраты проекта с учетом выполнения всех задач двумя людьми составляют **1 человеко-месяц**.

### Диаграмма Ганта
Диаграмма Ганта приложена к лабораторной работе.
